# Azure Pipelines
# https://aka.ms/yaml

name: DevSkim_VisualStudio_$(SourceBranchName)_$(Date:yyyyMMdd)$(Rev:.r)
trigger:
  batch: true
  paths:
    include:
    - DevSkim-VisualStudio-Extension/*
  branches:
    include:
    - master

stages:
- stage: Run Build Tests
  jobs:
  - job: Windows
    pool:
      vmImage: 'windows-latest'
    steps:
    - task: MSBuild@1
      inputs:
        solution: '$(SolutionDirectory)/Microsoft.DevSkim.VSExtension.Tests/Microsoft.DevSkim.VSExtension.Tests.csproj'
        platform: 'AnyCPU'
        configuration: 'Release'
        restoreNugetPackages: true

- stage: Publish
  jobs:
  - job: publish
    displayName: Publish Visual Studio Extension
    pool:
      vmImage: 'windows-latest'
    steps:
    - task: *TODO*